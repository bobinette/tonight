{{- if not .Tasks }}
<div id="new_planning">
  <h5>No current planning</h5>
  <div>Start a new planning by entering below how long you want to work:</div>
  <input
    id="plan_duration_input"
    type="text"
    class="form-control"
    placeholder="Duration e.g. 1h..."
  >
</div>
{{- else }}
<div>
  <div id="current_planning_header" class="flex flex-space-between">
    <span>Current planning:</span>
    <button id="dismiss_planning" class="btn btn-link">Dismiss</button>
  </div>
  <ul class="list-group Tasks">
    {{- range .Tasks}}
    <li class="list-group-item flex-column align-items-start Task {{ if not .Done }}TaskPending{{ end }}" data-taskid="{{ .ID }}">
      <div class="w-100 TaskHeader">
        <h6 class="TaskTitle" data-toggle="tooltip" data-delay='{"show": 500, "hide": 100 }' title="id: {{ .ID }}" data-placement="left" >
          {{ .Title }}
          <span class="TaskPriority">{{ formatPriority .Priority }}</span>
        </h6>
        {{- if eq .Done 0 }}
          <button class="btn btn-link fa fa-check TaskDone" data-taskid="{{ .ID }}"></button>
          <button class="btn btn-link fa fa-arrow-right PlanningDoLater" data-taskid="{{ .ID }}"></button>
        {{ else if eq .Done 1 }}
          <span class="badge badge-pill badge-success">done</span>
        {{ else if eq .Done 2 }}
          <span class="badge badge-pill badge-warning">won't do</span>
        {{- end }}
      </div>
      <div class="w-100 TaskDescription">{{ formatMarkDown .Description }}</div>
      <div class="w-100 TaskFooter">
        <div>
        {{- range .Tags }}
          <span class="badge badge-pill badge-primary">#{{ . }}</span>
        {{- end }}
        </div>
        <div class="grey TaskDetails">
          <div>
            {{- if .Duration }}
              {{ .Duration }}
            {{- else }}
              <em>(1h)</em>
            {{- end }}
            <i class="fa fa-clock-o TaskDetailsIcon"></i>
          </div>
          {{- if .Deadline}}
            <div class="Date" data-toggle="tooltip" data-delay='{"show": 500, "hide": 100 }' title="{{ formatDate .Deadline }}">
              {{ formatDateRelative .Deadline }}
              <i class="fa fa-calendar-check-o"></i>
            </div>
          {{- end }}
          {{- if .Dependencies }}
            <div>
              {{ formatDependencies .Dependencies }}
              <i class="fa fa-check-square-o"></i>
            </div>
          {{- end }}
        </div>
      </div>
      {{- if .Log }}
        <div class="w-100 TaskProgress">
          <div class="w-100 flex TaskLogProgressBar" data-taskid="{{ .ID }}">
            <span class="progress flex-1">
              <span class="progress-bar" role="progressbar" aria-valuenow="{{ .Completion }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ .Completion }}%"></span>
            </span>
            <small><em class="grey">{{ .Completion }}%</em></small>
          </div>
          {{ template "timeline.tmpl" .Log }}
        </div>
      {{- end }}
      <div class="w-100 TaskDoneInputPlaceholder"></div>
    </li>
    {{- end }}
  </ul>
  <div class="flex flex-space-between">
    <div>
      <small class="Date" data-toggle="tooltip" title="{{ formatDateTime .StartedAt }}">Started {{ formatDateRelative .StartedAt }}</small>
    </div>
    <div >
      <div><small>Asked for: {{ formatDuration .Duration }}</small></div>
      <div><small>Total time: {{ formatDuration .TotalDuration }}</small></div>
    </div>
  </div>
</div>
{{- end }}
